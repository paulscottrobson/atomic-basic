; *****************************************************************************
; *****************************************************************************
;
;		Name:		stdmac.asm
;		Author:		Paul Robson (paul@robsons.org.uk)
;		Date:		10 Dec 2020
;		Purpose:	Standard Macros
;
; *****************************************************************************
; *****************************************************************************

report 	.macro
		jmp 	EHandler\1
		.endm
		
; *****************************************************************************
;
;							X16 Emulator breakpoint
;		
; *****************************************************************************

stop 	.macro
		.byte 	$DB
		.endm

; *****************************************************************************
;
;					Set a 16 bit memory location to a constant
;
; *****************************************************************************

set16	.macro
		lda 	#(\2) & $FF
		sta 	\1
		lda 	#(\2) >> 8
		sta 	1+(\1)
		.endm

; *****************************************************************************
;
;					 Increment a 16 bit memory location
;
; *****************************************************************************

inc16 	.macro
		inc 	\2
		bne 	nocarry
		inc 	1+(\2)
nocarry
		.endm

; *****************************************************************************
;
;					Decrement a 16 bit memory location
;
; *****************************************************************************

dec16 	.macro
		lda 	\2
		bne 	nodecrement
		dec 	1+(\2)
nodecrement:
		dec 	\2
		.endm

; *****************************************************************************
;
;					Save/Restore X/Y may destroy A depends on CPU
;
; *****************************************************************************

pshx 	.macro
		txa
		pha
		.endm

pulx 	.macro
		pla
		tax
		.endm

pshy 	.macro
		tya
		pha
		.endm

puly 	.macro
		pla
		tay
		.endm

; *****************************************************************************
;
;								Make current integer.
;
; *****************************************************************************

makeinteger .macro
		lda 	#0
		sta 	esType,x
		.endm